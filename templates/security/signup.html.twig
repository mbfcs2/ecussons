{% extends 'base.html.twig' %}
{% block js %}<script src="https://www.google.com/recaptcha/api.js?render=6LdD8s8ZAAAAAJ20dgikVOYKk4QwFxXgSmnGtk6l"></script>


{% endblock %}
{% block title %}Inscription{% endblock %}

{% block hero %}
    <section class="hero is-primary">
        <div class="hero-body">
            <div class="container">
                <h1 class="title">
                    Inscription
                </h1>
            </div>
        </div>
    </section>
{% endblock %}
{% block body %}

    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
        Vous êtes déjà authentifié !
    {% else %}
        {{form_start(form, {'attr': { 'id':'signUpForm' }})}}
        {{form_widget(form)}}
        {{form_end(form)}}

        <script>
            document.querySelector("#ignUpForm").addEventListener("submit", function(e){
                e.preventDefault();
                grecaptcha.ready(function() {
                    grecaptcha.execute('6LdD8s8ZAAAAAJ20dgikVOYKk4QwFxXgSmnGtk6l', {action: 'submit'}).then(function(token) {
                        document.querySelector("#signUpForm").submit();
                    });
                });
            });
        </script>

    {% endif %}
{% endblock %}
